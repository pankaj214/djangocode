<script>
    $('#btnsave').click(()=>{
    output=""
    let id=$('#stuid').val()
    let name=$('#nameid').val()
    let email=$('#emailid').val()
    let password=$('#passwordid').val()
    let csr = $('input[name=csrfmiddlewaretoken').val()
  if(name=="" && email=="" && password==""){
$('#msg').text('Please enter all details')
        $('#msg').show()
  }
  else if(name==""){
        $('#msg').text('Please enter name')
        $('#msg').show()
    }
    else if(email==""){
        $('#msg').text('Please enter email')
        $('#msg').show()
    }
    else if(password==""){
        $('#msg').text('Please enter password')
        $('#msg').show()
    }
    else{
     my_data={stuid:id,name:name,email:email,password:password,csrfmiddlewaretoken:csr}
     $.ajax({
         url:"{% url 'save' %}",
         method:"POST",
         data:my_data,
         dataType:'json',
         success: function (data) {
   
             if(data.status=='Save') {
               $('#msg').text('Form submitted')
        $('#msg').show()
//                 console.log(data.employee_data)
   for (i=0;i<data.employee_data.length;i++){
       output+='<tr><td>'+data.employee_data[i].id+'</td><td>'+data.employee_data[i].name+'</td><td>'+data.employee_data[i].email+'</td><td>'+data.employee_data[i].password+'</td><td><input type="button" data-sid='+data.employee_data[i].id+' class="btn btn-warning btn-sm btn-edit" value="Edit"/><input type="button" data-sid='+data.employee_data[i].id+' class="btn btn-danger btn-sm ml-2 btn-del" value="Delete"/></td></tr>';
   }
                 $('#tbody').html(output)
                 $('#stuid').val('')
                 $('form')[0].reset()
             }
             else {
 $('#msg').text('Form not submitted')
        $('#msg').show()                
             $('#stuid').val('')
             }
         },
     });
    }
     })
     $('tbody').on('click','.btn-del',function(){
            // console.log('Delete button clicked')
             let id=$(this).attr('data-sid')
                 let csr = $('input[name=csrfmiddlewaretoken').val()
              //console.log(id)
              mydata={sid:id,csrfmiddlewaretoken:csr}
              mythis=this
              $.ajax({
                  url:'{% url 'delete' %}',
                  method:'POST',
                  data:mydata,
                  success:function(data) {
                      if(data.status==1) {
 $('#msg').text('Data Deleted ')
        $('#msg').show()
                         $(mythis).closest('tr').fadeOut()
                 }
                 else {
 $('#msg').text('Data not deleted')
        $('#msg').show()                 }

                 
                  },
              })
     });


     $('tbody').on('click','.btn-edit',function(){
            // console.log('Edit button clicked')
                 let id=$(this).attr('data-sid')
                 let csr = $('input[name=csrfmiddlewaretoken').val()
              //console.log(id)
              mydata={sid:id,csrfmiddlewaretoken:csr}
              $.ajax({
                  url:'{% url 'edit' %}',
                  method:'POST',
                  data:mydata,
                  success:function(data) {
                      $('#stuid').val(data.id)
                      $('#nameid').val(data.name)
                      $('#emailid').val(data.email)
                      $('#passwordid').val(data.password)

                 
                  },
              })
     });
</script>